
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Esimene projekt</h2>
        <ol class="breadcrumb">
            <li>
                <a ui-sref="home">Avaleht</a>
            </li>
            <li>
                <a ui-sref="project">Projektid</a>
            </li>
            <li class="active">
                <strong>{{project.name}}</strong>
            </li>
        </ol>
    </div>
</div>
<div class="row">
    <div class="wrapper wrapper-content animated fadeInUp">
        <div class="col-md-4">
            <a class="btn btn-block btn-primary m-b-sm" ui-sref="forms.project_file_manager"><i class="fa fa-edit"></i> Muuda projekti resursse</a>
            <input id="search-file" class="input-sm form-control" placeholder="Otsi faili">
            <div class="m-t-sm m-b-md">
                <label class="m-r-sm">Näita:</label>
                <div data-toggle="buttons" class="btn-group">
                    <label class="btn btn-sm btn-white active"> <input type="radio" id="option1" name="options"> Kõiki faile </label>
                    <label class="btn btn-sm btn-white"> <input type="radio" id="option2" name="options"> Sisendfaile </label>
                    <label class="btn btn-sm btn-white"> <input type="radio" id="option3" name="options"> Tulemeid </label>
                </div>
                <a href="#" class="btn btn-sm btn-link pull-right"><i class="fa fa-download"></i> Lae kõik tulemi failid alla</a>
            </div>
            <div class="project-tree m-t-md">
                <ul>
                    <li class="jstree-open">Esimene projekt
                        <ul>
                            <li class="jstree-open">tekstid
                                <ul>
                                    <li class="jstree-open" data-jstree='{"type":"text"}'>tekst1.txt
                                        <ul>
                                            <li class="text-navy" data-jstree='{"type":"text"}'>tekst1_tulem.txt</li>
                                        </ul>
                                    </li>
                                    <li data-jstree='{"type":"text"}'>tekst2.txt</li>
                                    <li data-jstree='{"type":"text"}'>tekst3.txt</li>
                                </ul>
                            </li>
                            <li>veel mingid tekstid
                                <ul>
                                    <li data-jstree='{"type":"text"}'>tekst1.txt</li>
                                    <li data-jstree='{"type":"text"}'>tekst2.txt</li>
                                    <li data-jstree='{"type":"text"}'>tekst3.txt</li>
                                </ul>
                            </li>
                            <li data-jstree='{"type":"zip"}'> 123456.zip</li>
                            <li data-jstree='{"type":"zip"}'> test.zip</li>
                        </ul>
                    </li>
                </ul>
                <ul>
                    <li class="jstree-open">Sõnede analüüs
                        <ul>
                            <li class="jstree-open">ilmateated
                                <ul>
                                    <li data-jstree='{"type":"text"}'>tekst1.txt</li>
                                    <li data-jstree='{"type":"text"}'>tekst2.txt</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-8">
            <div class="ibox">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-lg-5">
                            <dl class="dl-horizontal">
                                <dt>Lisaja:</dt>
                                <dd>{{project.user.name}}</dd>
                                <dt>Viimati muudetud:</dt>
                                <dd>{{project.updatedAt | date : 'dd.MM.yyyy H:mm:ss'}}</dd>
                                <dt>Loodud:</dt>
                                <dd>{{project.createdAt | date : 'dd.MM.yyyy H:mm:ss'}}</dd>
                            </dl>
                        </div>
                        <div class="col-lg-7" id="cluster_info">
                            <dl class="dl-horizontal">
                                <dt>Nähtav:</dt>
                                <dd ng-if="project.accessStatus == 'shared'" class="project-people">
                                    <a ng-repeat="projectUser in project.projectUsers" href="">
                                        <img alt="{{projectUser.name}}" class="img-circle" ng-src="{{projectUser.displaypicture}}" title="{{projectUser.name}}">
                                    </a>
                                </dd>
                                <dd ng-if="project.accessStatus == 'private'" class="project-people">
                                    <a href="">
                                        <img alt="{{project.user.name}}" class="img-circle" ng-src="{{project.user.displaypicture}}" title="{{project.user.name}}">
                                    </a>
                                </dd>
                            </dl>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <dl class="dl-horizontal m-n">
                                <dt>Kirjeldus:</dt>
                                <dd>
                                    {{project.description}}
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-sm-12">
                            <h3>Töövood</h3>
                        </div>
                    </div>
                    <div class="project-list">
                        <table class="table table-hover">
                            <tbody>
                                <tr ng-repeat="workflow in workflows">
                                    <td class="project-status">
                                        <span ng-class="{
                                                'label label-default': workflow.status == 'INIT',
                                                'label label-primary': workflow.status == 'RUNNING',
                                                'label label-success': workflow.status == 'FINISHED',
                                                'label label-warning': workflow.status == 'CANCELLED',
                                                'label label-danger': workflow.status == 'ERROR'
                                            }">
                                            {{workflow.status | translate}}
                                        </span>
                                    </td>
                                    <td class="project-title">
                                        <a ui-sref="commerce.project_flow_detail">{{workflow.name}}</a>
                                        <br/>
                                        <small>Lisatud {{workflow.datetimeCreated | date : 'dd.MM.yyyy'}}</small>
                                    </td>
                                    <td>
                                        Alustatud
                                        <br/>
                                        <small> {{workflow.datetimeStart | date : 'dd.MM.yyyy H:mm'}}</small>
                                    </td>
                                    <td>
                                        Lõpetatud
                                        <br/>
                                        <small> {{workflow.datetimeEnd | date : 'dd.MM.yyyy H:mm'}}</small>
                                    </td>
                                    <td class="project-completion">

                                        <small>Progress: {{workflow.progress}}%</small>
                                        <div class="progress progress-mini">
                                            <div ng-style="{width: workflow.progress + '%'}" class="progress-bar"></div>
                                        </div>

                                    </td>
                                    <td class="project-actions">
                                        <a ui-sref="workflow({id: workflow.id})" class="btn btn-white btn-xs"><i class="fa fa-pencil"></i> Muuda </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="ibox-footer text-right">
                    <a ui-sref="project" class="btn btn-sm btn-link pull-left"><i class="fa fa-caret-left"></i> Tagasi projektide nimekirja</a>

                    <a class="btn btn-white btn-sm"><i class="fa fa-pencil"></i> Muuda projekti sätteid</a>
                    <a ng-click="defineWorkflow()" class="btn btn-primary btn-sm"><i class="fa fa-edit"></i> Defineeri uus töövoog</a>
                    <a ng-click="open6()" class="btn btn-info btn-sm"><i class="fa fa-plus"></i> Lisa uus töövoog</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .jstree-open > .jstree-anchor > .fa-folder:before {
        content: "\f07c";
    }

    .jstree-default .jstree-icon.none {
        width: 0;
    }
</style>

<script>
    $(document).ready(function(){

        $('.project-tree').jstree({
            'core' : {
                'check_callback' : true
            },
            'plugins' : [ 'types', 'dnd' ],
            'types' : {
                'default' : {
                    'icon' : 'fa fa-folder'
                },
                'zip' : {
                    'icon' : 'fa fa-file-zip-o'
                },
                'svg' : {
                    'icon' : 'fa fa-file-picture-o'
                },
                'text' : {
                    'icon' : 'fa fa-file-text-o'
                }
            }
        });

    });
</script>


