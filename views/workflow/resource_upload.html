<div kl-breadcrumb></div>

<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-lg-6">

            <div class="ibox">
                <div class="ibox-title">
                    <h5>Lisatud failid</h5>
                </div>
                <div class="ibox-content">
                    <div class="file-manager">
                        <div filetree workflow-id="{{workflowId}}" project-id="{{projectId}}"></div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="ibox-footer">
                    <a ui-sref="workflow-definition-edit({workflowId: workflowId})" class="btn btn-primary btn-sm">
                        <i class="fa fa-caret-left"></i> Tagasi töövoo juurde
                    </a>
                    <a ng-click="runWorkflow()" class="btn btn-info btn-sm">
                        <i class="fa fa-play"></i> Käivita töövoog
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-6 animated fadeInRight">

            <!---->
            <div class="tabs-container">
                <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" data-target="#tab-upload" aria-expanded="true"> Lae üles </a></li>
                    <li class=""><a data-toggle="tab" data-target="#tab-local" aria-expanded="false">Olemasolevad</a></li>
                    <li class=""><a data-toggle="tab" data-target="#tab-entu" aria-expanded="false">Lae Entust</a></li>
                    <li class=""><a data-toggle="tab" data-target="#tab-url" aria-expanded="false">Lae URL-lt</a></li>
                </ul>
                <div class="tab-content">
                    <div id="tab-upload" class="tab-pane active">
                        <div class="panel-body">

                            <div class="form-group">
                                <form action="" class="dropzone" drop-zone="" >
                                    <div class="dz-message" data-dz-message>
                                        <span>Lohista failid siia või vali arvutist</span>
                                    </div>
                                </form>
                            </div>
                            <div class="text-right">
                                <a ng-click="startUpload()" class="btn btn-primary btn-sm">
                                    <i class="fa fa-upload"></i> Lae üles failid
                                </a>
                            </div>
                        </div>
                    </div>
                    <div id="tab-local" class="tab-pane">
                        <div class="panel-body">
                            <div class="form-group">
                                <div class="file-manager">
                                    <div filetree checkbox="true" get-selected="getSelectedResources"></div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div class="text-right">
                                <a ng-click="addExistingResources()" class="btn btn-primary btn-sm">
                                    <i class="fa fa-plus"></i> Lisa valitud failid
                                </a>
                            </div>
                        </div>
                    </div>
                    <div id="tab-entu" class="tab-pane">
                        <div class="panel-body">
                            <div class="form-group">
                                <div class="file-manager">
                                    <div entutree get-selected="getSelectedEntuResources"></div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div class="text-right">
                                <a kl-save-button
                                   processing="{{!entuLoadEnabled}}"
                                   enabled="{{entuLoadEnabled}}"
                                   messages="Lae:Laadimine:Laetud"
                                   class="btn btn-primary btn-sm"
                                   ng-click="addExistingEntuResources()">
                                    <i class="fa fa-plus"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div id="tab-url" class="tab-pane">
                        <div class="panel-body">
                            <form name="urlForm" role="form" novalidate>
                                <div ng-class="{'has-error': urlForm.name.$invalid && urlForm.submitted,  'form-group': true}">
                                    <input type="text" ng-model="download.name" name="name" class="form-control" placeholder="Ressursi nimi" required/>
                                    <i ng-show="urlForm.name.$error.required && urlForm.submitted">Väli on nõutud</i>
                                </div>
                                <div ng-class="{'has-error': urlForm.url.$invalid && urlForm.submitted,  'form-group': true}">
                                    <input type="url" ng-model="download.url" name="url" class="form-control" placeholder="Sisesta ressursi URL" required/>
                                    <i ng-show="urlForm.url.$error.required && urlForm.submitted">Väli on nõutud</i>
                                    <i ng-show="urlForm.url.$error.url && urlForm.submitted">Väärtus peab olema url</i>
                                </div>
                            </form>

                            <div class="text-right">
                                <a kl-save-button
                                   enabled="{{urlForm.$dirty}}"
                                   processing="{{loadingFromUrl}}"
                                   messages="Lae:Laadimine:Laetud"
                                   class="btn btn-primary btn-sm"
                                   ng-click="loadFromUrl( urlForm )">
                                    <i class="fa fa-plus"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!---->
        </div>
    </div>
</div>